# ===========================
# CinePulse – .env.example
# Copy to .env and adjust.
# ===========================

# ---------- Core ----------
ENV=dev
TZ=Asia/Kolkata
LOG_LEVEL=INFO

# ---------- Storage / Queues ----------
# Postgres is optional right now (kept for future features).
DATABASE_URL=postgresql+psycopg://postgres:postgres@db:5432/cinepulse
REDIS_URL=redis://redis:6379/0

# Rolling feed settings (Redis)
FEED_KEY=feed:items            # keep in sync with API/worker defaults
SEEN_KEY=feed:seen             # used by worker for dedupe
FEED_MAX=1200                  # max items kept in the rolling list
MAX_SCAN=400                   # API: how deep /v1/search & detail can scan

# ---------- Observability ----------
SENTRY_DSN_BACKEND=

# ---------- External APIs (optional) ----------
# Leave blank if not used; keep real tokens in your private .env, never in git.
YOUTUBE_API_KEY=
TMDB_API_KEY=
OMDB_API_KEY=
FCM_SERVER_KEY=

# ---------- Service URLs ----------
# Public URL where browsers / devices can reach your API
API_PUBLIC_BASE_URL=https://api.onlinecalculatorpro.org
# Internal URL for containers to reach the API
API_INTERNAL_BASE_URL=http://api:8000
# Optional HTML/image renderer (only if you run the renderer service)
RENDERER_URL=http://renderer:8000

# Comma-separated origins allowed to call the API (no spaces).
# Keep "*" during early dev, then lock down to your production sites.
CORS_ORIGINS=*,https://cinepusle.netlify.app,https://api.onlinecalculatorpro.org

# Base used to mint share/deep links (Flutter web uses hash route /#/s/<id>)
DEEP_LINK_BASE=https://cinepusle.netlify.app/#/s

# ---------- Scheduler / Ingestion ----------
# YouTube channels (comma-separated channel IDs)
# Examples below: Netflix, Sony Pictures, T-Series. Add/remove as you like.
YT_CHANNELS=UCWOA1ZGywLbqmigxE4Qlvuw,UCz97F7dMxBNOfGYu3rx8aCw,UCq-Fj5jknLsUf-MWSy4_brA

# RSS feeds (comma-separated). You can append a kind hint with |ott or |news.
# Example with hints: https://deadline.com/feed/|news,https://www.pinkvilla.com/entertainment/feed|news
RSS_FEEDS=https://variety.com/feed/,https://deadline.com/feed/,https://www.hollywoodreporter.com/feed/,https://www.bollywoodhungama.com/rss/news.xml,https://www.123telugu.com/feed

# Polling cadence & window (must be integers)
POLL_INTERVAL_MIN=15
PUBLISHED_AFTER_HOURS=72

# Spread each request a bit (avoid bursty traffic) and add small per-cycle jitter
POLL_SPREAD_SEC=2.0
POLL_JITTER_SEC=10

# Hard caps per poll (must be integers if set)
YT_MAX_ITEMS=50
RSS_MAX_ITEMS=200

# Run a single cycle then exit (useful for one-off jobs / debugging)
ONE_SHOT=false

# Feature toggles
ENABLE_YOUTUBE_INGEST=true
ENABLE_RSS_INGEST=true
ENABLE_TMDB_INGEST=false

# ---------- Notes ----------
# - For Android debug over HTTP, ensure your debug manifest enables cleartext and
#   android/app/src/debug/res/xml/network_security_config.xml allows your API host.
# - Keep Netlify / GitHub Action secrets (NETLIFY_AUTH_TOKEN, NETLIFY_SITE_ID,
#   API_BASE_URL, DEEP_LINK_BASE) in repository/secrets — not here.
