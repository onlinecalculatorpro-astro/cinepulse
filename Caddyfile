{
  email rohitkejriwal1989@gmail.com
}

# Force HTTP -> HTTPS
http://api.onlinecalculatorpro.org {
  redir https://api.onlinecalculatorpro.org{uri} permanent
}

# HTTPS site
api.onlinecalculatorpro.org {
  encode zstd gzip
  reverse_proxy api:8000

  @health path /health
  header @health Cache-Control "no-store"

  header {
    # HSTS (enforce HTTPS for browsers)
    Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    X-Content-Type-Options "nosniff"
    Referrer-Policy "no-referrer"
  }

  tls {
    protocols tls1.2 tls1.3
  }
}

